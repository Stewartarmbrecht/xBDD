xBDD Core

xBDD - Core - Test - Features - Define Scenarios
	Define A Basic Scenario
		With Asynchronous Execution [Failed]
			Given has the following scenarion definition
				using Microsoft.VisualStudio.TestTools.UnitTesting;
				using System.Threading.Tasks;
				using xBDD;
				
				namespace MyApp.HelpDeskTechnicianFeatures.Accounts
				{
					[AsA("help dedk technician")]
					[YouCan("access user account information faster")]
					[By("clicking the account details link next to the user name in the user search results")]
					// [TestClass] - for MSTest
					// [TestFixture] - for nUnit
					public class AccessAccountDetailsFromUserSearch
					{
						// [Fact] - for xUnit
						// [Test] - for nUnit
						public async Task IfYouAreLoggedInAsAHelpDeskTechnician()
						{
							await xB.AddScenario(this)
								.GivenAsync("you are logged in as a Help Desk Technician", async (s) => {
									// Replace with actual code that returns a task.
									await Task.Run(() => { });
								})
								.AndAsync("you execute a user search", async (s) => {
									// Replace with actual code that returns a task.
									await Task.Run(() => { });
								})
								.WhenAsync("you click the information icon next to the user name in the search results", async (s) => {
									// Replace with actual code that returns a task.
									await Task.Run(() => { });
								})
								.Then("you will be taken to the user details page", (s) => {
									// Replace with synchronous code.
								})
								.Run();
						}
						public async Task IfYouAreNotLoggedInAsAHelpDeskTechnician()
						{
							await xB.AddScenario(this)
								.GivenAsync("you are logged in as a normal user", async (s) => {
									// Replace with actual code that returns a task.
									await Task.Run(() => { });
								})
								.AndAsync("you execute a user search", async (s) => {
									// Replace with actual code that returns a task.
									await Task.Run(() => { });
								})
								.ThenAsync("you should not see an information icon next to the users name in the search results", async (s) => {
									// Replace with actual code that returns a task.
									await Task.Run(() => { });
								})
								.Run();
						}
					}
				}
			When the scenario is excuted
			Then the test run will have the following structure [Failed]
				Area:
				My App - API - Test - Features - Accounts
				
				Feature:
				Get Account Details
				
				Scenario:
				When Unauthenticated
				
				Steps:
				Given the client is not authenticated
				When the client gets to the account details resource 'https://<site>/api/Accounts/99'
				Then the client should get a 401 response
				Error Type: AssertFailedException
				   Message: Assert.AreEqual failed. Expected:<My App - API - Test - Features - Accounts>. Actual:<My App - Help Desk Technician Features - Accounts>. 
				     Stack:    at Microsoft.VisualStudio.TestTools.UnitTesting.Assert.HandleFail(String assertionName, String message, Object[] parameters)
				               at Microsoft.VisualStudio.TestTools.UnitTesting.Assert.AreEqual[T](T expected, T actual, String message, Object[] parameters)
				               at xBDD.Core.Test.Features.DefineScenarios.DefineABasicScenario.<>c__DisplayClass6_0.<WithAsynchronousExecution>b__1(Step s) in /Users/stewartarmbrecht/Source/xBDD/core/xBDD.Core.Test/Features/DefineScenarios/DefineABasicScenario.cs:line 107
				               at xBDD.Core.StepExecutor.<>c__DisplayClass4_0.<ExecuteStepAsync>b__0() in /Users/stewartarmbrecht/Source/xBDD/core/xBDD.Core/Core/StepExecutor.cs:line 25
				               at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
				            --- End of stack trace from previous location where exception was thrown ---
				               at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
				            --- End of stack trace from previous location where exception was thrown ---
				               at xBDD.Core.StepExecutor.ExecuteStepAsync(Step step) in /Users/stewartarmbrecht/Source/xBDD/core/xBDD.Core/Core/StepExecutor.cs:line 25
		With Synchronous Execution [Failed]
			Given has the following scenarion definition
				using Microsoft.VisualStudio.TestTools.UnitTesting;
				using xBDD;
				
				//Area
				namespace MyApp.API.Test.Features.Calendar
				{
					//Feature
					[AsA("developer")]
					[YouCan("find the holidays for the users culture in a specific time range")]
					[By("using the operations exposed by the User object's Calendar property")]
					[TestClass]
					// [TestClass] - for MSTest
					// [TestFixture] - for nUnit
					public class GetHolidays
					{
						//Scenario
						// [Fact] - for xUnit
						// [Test] - for nUnit
						public async void WhenUSCalendar()
						{
							await xB.AddScenario(this)
								.Given("a user object for a user with a US culture", (s) => {
									//code to create calendar
								})
								.When("you call GetHolidays with a date range of 3/10/2015 to 3/18/2015", (s) => {
									//code to issue get request.
								})
								.Then("you should get back a single holiday that is St. Patrick's Day", (s) => {
									//code to validate response
								})
								.Run();
						}
					}
				}
			When the scenario is executed
			Then the test run will have the following structure [Failed]
				Area:
				My App - API - Test - Features - Calendar
				
				Feature:
				Get Holidays
				
				Feature Description:
				In order to reference culture specific holidays
				As a developer
				I would like to get a list of the current user's culture specific holidays
				
				Scenario:
				When US Calendar
				
				Steps:
				Given a calendar object is initialized with US holidays
				When you call GetHolidays with a date range of 3/10/2015 to 3/18/2015
				Then you should get back a single holiday that is St. Patrick's Day
				Error Type: AssertFailedException
				   Message: Assert.AreEqual failed. Expected:<to reference culture specific holidays>. Actual:<find the holidays for the users culture in a specific time range>. 
				     Stack:    at Microsoft.VisualStudio.TestTools.UnitTesting.Assert.HandleFail(String assertionName, String message, Object[] parameters)
				               at Microsoft.VisualStudio.TestTools.UnitTesting.Assert.AreEqual[T](T expected, T actual, String message, Object[] parameters)
				               at xBDD.Core.Test.Features.DefineScenarios.DefineABasicScenario.<>c__DisplayClass5_0.<WithSynchronousExecution>b__1(Step s) in /Users/stewartarmbrecht/Source/xBDD/core/xBDD.Core.Test/Features/DefineScenarios/DefineABasicScenario.cs:line 63
				               at xBDD.Core.StepExecutor.<>c__DisplayClass4_0.<ExecuteStepAsync>b__0() in /Users/stewartarmbrecht/Source/xBDD/core/xBDD.Core/Core/StepExecutor.cs:line 25
				               at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
				            --- End of stack trace from previous location where exception was thrown ---
				               at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
				            --- End of stack trace from previous location where exception was thrown ---
				               at xBDD.Core.StepExecutor.ExecuteStepAsync(Step step) in /Users/stewartarmbrecht/Source/xBDD/core/xBDD.Core/Core/StepExecutor.cs:line 25
	Define A Documentation Scenario
		With Synchronous Execution [Failed]
			Given has the following scenarion definition
				using Microsoft.VisualStudio.TestTools.UnitTesting;
				using xBDD;
				
				//Area
				namespace MyApp.API.Test.Features.Calendar
				{
					//Feature
					[AsA("developer")]
					[YouCan("find the holidays for the users culture in a specific time range")]
					[By("using the operations exposed by the User object's Calendar property")]
					[TestClass]
					// [TestClass] - for MSTest
					// [TestFixture] - for nUnit
					public class GetHolidays
					{
						//Scenario
						// [Fact] - for xUnit
						// [Test] - for nUnit
						public async void WhenUSCalendar()
						{
							await xB.AddScenario(this)
								.Given("a user object for a user with a US culture", (s) => {
									//code to create calendar
								})
								.When("you call GetHolidays with a date range of 3/10/2015 to 3/18/2015", (s) => {
									//code to issue get request.
								})
								.Then("you should get back a single holiday that is St. Patrick's Day", (s) => {
									//code to validate response
								})
								.Run();
						}
					}
				}
			When the scenario is executed
			Then the test run will have the following structure [Failed]
				Area:
				My App - API - Test - Features - Getting Started
				
				Feature:
				Installing The Framework
				
				Feature Description:
				As a developer
				You can install the xBDD framework to reference culture specific holidays
				I would like to get a list of the current user's culture specific holidays
				
				Scenario:
				When US Calendar
				
				Steps:
				Given a calendar object is initialized with US holidays
				When you call GetHolidays with a date range of 3/10/2015 to 3/18/2015
				Then you should get back a single holiday that is St. Patrick's Day
				Error Type: AssertFailedException
				   Message: Assert.AreEqual failed. Expected:<My App - API - Test - Features - Getting Started>. Actual:<My App - API - Test - Features - Calendar>. 
				     Stack:    at Microsoft.VisualStudio.TestTools.UnitTesting.Assert.HandleFail(String assertionName, String message, Object[] parameters)
				               at Microsoft.VisualStudio.TestTools.UnitTesting.Assert.AreEqual[T](T expected, T actual, String message, Object[] parameters)
				               at xBDD.Core.Test.Features.DefineScenarios.DefineADocumentationScenario.<>c__DisplayClass5_0.<WithSynchronousExecution>b__1(Step s) in /Users/stewartarmbrecht/Source/xBDD/core/xBDD.Core.Test/Features/DefineScenarios/DefineADocumentationScenario.cs:line 61
				               at xBDD.Core.StepExecutor.<>c__DisplayClass4_0.<ExecuteStepAsync>b__0() in /Users/stewartarmbrecht/Source/xBDD/core/xBDD.Core/Core/StepExecutor.cs:line 25
				               at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
				            --- End of stack trace from previous location where exception was thrown ---
				               at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
				            --- End of stack trace from previous location where exception was thrown ---
				               at xBDD.Core.StepExecutor.ExecuteStepAsync(Step step) in /Users/stewartarmbrecht/Source/xBDD/core/xBDD.Core/Core/StepExecutor.cs:line 25
	Define A Scenario With Reusable Steps
		With Asynchronous Execution [Failed]
			Given has the following scenarion definition
				using Microsoft.VisualStudio.TestTools.UnitTesting;
				using System.Threading.Tasks;
				using xBDD;
				
				namespace MyApp.HelpDeskTechnicianFeatures.Accounts
				{
					[AsA("help dedk technician")]
					[YouCan("access user account information faster")]
					[By("clicking the account details link next to the user name in the user search results")]
					// [TestClass] - for MSTest
					// [TestFixture] - for nUnit
					public class AccessAccountDetailsFromUserSearch
					{
						// [Fact] - for xUnit
						// [Test] - for nUnit
						public async Task IfYouAreLoggedInAsAHelpDeskTechnician()
						{
							await xB.AddScenario(this)
								.GivenAsync("you are logged in as a Help Desk Technician", async (s) => {
									// Replace with actual code that returns a task.
									await Task.Run(() => { });
								})
								.AndAsync("you execute a user search", async (s) => {
									// Replace with actual code that returns a task.
									await Task.Run(() => { });
								})
								.WhenAsync("you click the information icon next to the user name in the search results", async (s) => {
									// Replace with actual code that returns a task.
									await Task.Run(() => { });
								})
								.Then("you will be taken to the user details page", (s) => {
									// Replace with synchronous code.
								})
								.Run();
						}
						public async Task IfYouAreNotLoggedInAsAHelpDeskTechnician()
						{
							await xB.AddScenario(this)
								.GivenAsync("you are logged in as a normal user", async (s) => {
									// Replace with actual code that returns a task.
									await Task.Run(() => { });
								})
								.AndAsync("you execute a user search", async (s) => {
									// Replace with actual code that returns a task.
									await Task.Run(() => { });
								})
								.ThenAsync("you should not see an information icon next to the users name in the search results", async (s) => {
									// Replace with actual code that returns a task.
									await Task.Run(() => { });
								})
								.Run();
						}
					}
				}
			When the scenario is excuted
			Then the test run will have the following structure [Failed]
				Area:
				My App - API - Test - Features - Accounts
				
				Feature:
				Get Account Details
				
				Scenario:
				When Unauthenticated
				
				Steps:
				Given the client is not authenticated
				When the client gets to the account details resource 'https://<site>/api/Accounts/99'
				Then the client should get a 401 response
				Error Type: AssertFailedException
				   Message: Assert.AreEqual failed. Expected:<My App - API - Test - Features - Accounts>. Actual:<My App - Help Desk Technician Features - Accounts>. 
				     Stack:    at Microsoft.VisualStudio.TestTools.UnitTesting.Assert.HandleFail(String assertionName, String message, Object[] parameters)
				               at Microsoft.VisualStudio.TestTools.UnitTesting.Assert.AreEqual[T](T expected, T actual, String message, Object[] parameters)
				               at xBDD.Core.Test.Features.DefineScenarios.DefineAScenarioWithReusableSteps.<>c__DisplayClass3_0.<WithAsynchronousExecution>b__1(Step s) in /Users/stewartarmbrecht/Source/xBDD/core/xBDD.Core.Test/Features/DefineScenarios/DefineAScenarioWithReusableSteps.cs:line 109
				               at xBDD.Core.StepExecutor.<>c__DisplayClass4_0.<ExecuteStepAsync>b__0() in /Users/stewartarmbrecht/Source/xBDD/core/xBDD.Core/Core/StepExecutor.cs:line 25
				               at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
				            --- End of stack trace from previous location where exception was thrown ---
				               at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
				            --- End of stack trace from previous location where exception was thrown ---
				               at xBDD.Core.StepExecutor.ExecuteStepAsync(Step step) in /Users/stewartarmbrecht/Source/xBDD/core/xBDD.Core/Core/StepExecutor.cs:line 25
		With Synchronous Execution [Failed]
			Given has the following scenarion definition
				using Microsoft.VisualStudio.TestTools.UnitTesting;
				using xBDD;
				
				//Area
				namespace MyApp.API.Test.Features.Calendar
				{
					//Feature
					[AsA("developer")]
					[YouCan("find the holidays for the users culture in a specific time range")]
					[By("using the operations exposed by the User object's Calendar property")]
					[TestClass]
					// [TestClass] - for MSTest
					// [TestFixture] - for nUnit
					public class GetHolidays
					{
						//Scenario
						// [Fact] - for xUnit
						// [Test] - for nUnit
						public async void WhenUSCalendar()
						{
							await xB.AddScenario(this)
								.Given("a user object for a user with a US culture", (s) => {
									//code to create calendar
								})
								.When("you call GetHolidays with a date range of 3/10/2015 to 3/18/2015", (s) => {
									//code to issue get request.
								})
								.Then("you should get back a single holiday that is St. Patrick's Day", (s) => {
									//code to validate response
								})
								.Run();
						}
					}
				}
			When the scenario is executed
			Then the test run will have the following structure [Failed]
				Area:
				My App - API - Test - Features - Calendar
				
				Feature:
				Get Holidays
				
				Feature Description:
				In order to reference culture specific holidays
				As a developer
				I would like to get a list of the current user's culture specific holidays
				
				Scenario:
				When US Calendar
				
				Steps:
				Given a calendar object is initialized with US holidays
				When you call GetHolidays with a date range of 3/10/2015 to 3/18/2015
				Then you should get back a single holiday that is St. Patrick's Day
				Error Type: AssertFailedException
				   Message: Assert.AreEqual failed. Expected:<to reference culture specific holidays>. Actual:<find the holidays for the users culture in a specific time range>. 
				     Stack:    at Microsoft.VisualStudio.TestTools.UnitTesting.Assert.HandleFail(String assertionName, String message, Object[] parameters)
				               at Microsoft.VisualStudio.TestTools.UnitTesting.Assert.AreEqual[T](T expected, T actual, String message, Object[] parameters)
				               at xBDD.Core.Test.Features.DefineScenarios.DefineAScenarioWithReusableSteps.<>c__DisplayClass2_0.<WithSynchronousExecution>b__1(Step s) in /Users/stewartarmbrecht/Source/xBDD/core/xBDD.Core.Test/Features/DefineScenarios/DefineAScenarioWithReusableSteps.cs:line 64
				               at xBDD.Core.StepExecutor.<>c__DisplayClass4_0.<ExecuteStepAsync>b__0() in /Users/stewartarmbrecht/Source/xBDD/core/xBDD.Core/Core/StepExecutor.cs:line 25
				               at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
				            --- End of stack trace from previous location where exception was thrown ---
				               at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
				            --- End of stack trace from previous location where exception was thrown ---
				               at xBDD.Core.StepExecutor.ExecuteStepAsync(Step step) in /Users/stewartarmbrecht/Source/xBDD/core/xBDD.Core/Core/StepExecutor.cs:line 25
